<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Hello, World</title>
    <style type="text/css">
        html{height:100%}
        body{height:100%;margin:0px;padding:0px}
        #container{height:100%}
    </style>
    <script type="text/javascript" src="https://api.map.baidu.com/api?v=1.0&type=webgl&ak=dqQDIGUBKkxcLpKWgTOFHpjt"></script>
    <script type="text/javascript" src="lushu.js"></script>
    <style type="text/css">
        /*.BMap_bubble_pop{
            border-radius: 25px;
        }*/
    </style>
</head>

<body>
<div id="container"></div>
<script type="text/javascript">
    var map = new BMapGL.Map("container");
    // 创建地图实例
    var point = new BMapGL.Point(113.314282,23.395352);
    // 创建点坐标
    map.centerAndZoom(point, 6);
    // 初始化地图，设置中心点坐标和地图级别
    map.enableScrollWheelZoom(true);     //开启鼠标滚轮缩放

    map.setHeading(64.5);   //设置地图旋转角度
    map.setTilt(73);       //设置地图的倾斜角度
    map.setMapType(BMAP_EARTH_MAP);      // 设置地图类型为地球模式

    var scaleCtrl = new BMapGL.ScaleControl();  // 添加比例尺控件
    map.addControl(scaleCtrl);
    var zoomCtrl = new BMapGL.ZoomControl();  // 添加缩放控件
    map.addControl(zoomCtrl);

    var opts_baiyun = {
        width: 0,     // 信息窗口宽度
        height: 0,    // 信息窗口高度
        title: "Day1(10-04)：起点"  // 信息窗口标题
    };
    var infoWindow_baiyun = new BMapGL.InfoWindow("广州白云国际机场", opts_baiyun);  // 创建信息窗口对象
    var point_baiyun= new BMapGL.Point(113.314282,23.395352);
    map.openInfoWindow(infoWindow_baiyun, point_baiyun);        // 打开信息窗口

    /*返回点击的坐标信息
    function showInfo(e){
        alert(e.point.lng + ", " + e.point.lat);
    }
    map.addEventListener("click", showInfo);*/

        var lushu;
        var fly = 'data:image/png;base64,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';

    var path = [
        new BMapGL.Point(113.314282,23.395352),
        new BMapGL.Point(90.918706,29.299495)
    ];
    var polyline = new BMapGL.Polyline(path, {
        clip: false,
        geodesic: true,
        strokeWeight: 1
    });

    lushu = new BMapGLLib.LuShu(map, polyline.getPath(), {
        defaultContent:"一路顺风",
        geodesic: true,
        autoCenter: true,
        icon: new BMapGL.Icon(fly, new BMapGL.Size(30, 30), { anchor: new BMapGL.Size(24, 24) }), //飞机尺寸
        speed: 2000000,  //覆盖物移动速度，单位米/秒
        enableRotation: true,
        landmarkPois:[
            /*{lng:91.140031,lat:29.653516,html:'拉萨风火水土藏式生活民宿',pauseTime:2},*/
            {lng:113.31249,lat:23.395899,html:'(day1)起点：广州白云国际机场1',pauseTime:8},
            {lng:113.312728,lat:23.395966,html:'(day1)起点：广州白云国际机场2',pauseTime:8},
            {lng:113.313348,lat:23.395804,html:'(day1)起点：广州白云国际机场3',pauseTime:8},
            /*{lng:91.125038,lat:29.660346,html:'布达拉宫',pauseTime:3}*/
            {lng:90.918706,lat:29.299495,html:'(day1)到达：拉萨贡嘎国际机场',pauseTime:3}
        ]
    });


    //setTimeout('lushu.start(function() { alert("路书结束的回调函数1") })', 8000);
    //setTimeout('map.closeInfoWindow()', 8000);
    setTimeout('map.setZoom(13);', 18000);




    //map.addOverlay(polyline);  //显示飞行线路

    function startLushu() {
        lushu.start(function () {
            alert("路书结束的回调函数1"); //回调方法不知道如何实现--todo
        });

        //路书启动,参数为一个函数
        /*lushu.start(function() {
            console.log("路书结束的回调开始调用了1");
            lushu = null; //当前路书置空
        });*/
    }

    setTimeout('startLushu()', 8000);

    var car = "data:image/png;base64,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";


    var lushu3;
    // 实例化一个驾车导航用来生成路线
    var drv = new BMapGL.DrivingRoute('西藏', {
        onSearchComplete: function(res) {
            if (drv.getStatus() == BMAP_STATUS_SUCCESS) {
                var plan = res.getPlan(0);
                var arrPois =[];
                for(var j=0;j<plan.getNumRoutes();j++){
                    var route = plan.getRoute(j);
                    arrPois= arrPois.concat(route.getPath());
                }
                map.addOverlay(new BMapGL.Polyline(arrPois, {strokeColor: '#111'}));
                map.setViewport(arrPois);

                lushu3 = new BMapGLLib.LuShu(map,arrPois,{
                    defaultContent:"冲冲冲",
                    autoView:true,//是否开启自动视野调整，如果开启那么路书在运动过程中会根据视野自动调整
                    icon  : new BMapGL.Icon(car, new BMapGL.Size(30,30),{anchor : new BMapGL.Size(24, 24)}),
                    speed: 8000,
                    enableRotation:true,//是否设置marker随着道路的走向进行旋转
                    landmarkPois: [
                        {lng:91.140031,lat:29.653516,html:'住宿：拉萨风火水土藏式生活民宿',pauseTime:2},
                        {lng:91.140422,lat:29.652606,html:'(day1)到达：民宿外面-江苏路',pauseTime:2},
                    ]});




            }
        }
    });
    var start=new BMapGL.Point(90.918706,29.299495);
    var end=new BMapGL.Point(91.140031,29.653516);
    drv.search(start, end);

    function startLushu3() {
        lushu3.start();

        //路书启动,参数为一个函数
        /*lushu3.start(function() {
            console.log("路书结束的回调开始调用了3");
            lushu3 = null; //当前路书置空
        });*/
    }

    setTimeout('startLushu3()', 21000);


    var lushu2;
    var path2 = [
        new BMapGL.Point(91.140422,29.652606),
        new BMapGL.Point(91.140031,29.653516)
    ];
    var polyline2 = new BMapGL.Polyline(path2, {
        clip: false,
        geodesic: true,
        strokeWeight: 4
    });
    map.addOverlay(polyline2);  //显示飞行线路

    lushu2 = new BMapGLLib.LuShu(map, polyline2.getPath(), {
        defaultContent:"休息咯",
        geodesic: true,
        autoCenter: true,
        icon: new BMapGL.Icon(car, new BMapGL.Size(30, 30), { anchor: new BMapGL.Size(24, 24) }), //飞机尺寸
        speed: 30,  //覆盖物移动速度，单位米/秒
        enableRotation: true,
        landmarkPois:[
            {lng:91.140031,lat:29.653516,html:'(day1)到达：拉萨风火水土藏式生活民宿',pauseTime:2}
        ]
    });

    setTimeout('map.setZoom(18);',  37000);
    //setTimeout('lushu2.start(function() { alert("路书结束的回调函数2") })', 40000);


    function startLushu2() {
        lushu2.start();

        //路书启动,参数为一个函数
        /*lushu2.start(function() {
            console.log("路书结束的回调开始调用了2");
            lushu2 = null; //当前路书置空
        });*/
    }

    setTimeout('startLushu2()', 40000);




</script>
</body>
</html>